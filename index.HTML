 <!DOCTYPE html>
 <html lang="en">
 <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Aetna Onboarding - Aetna Purple Theme</title>
     <script src="https://cdn.tailwindcss.com"></script>
     <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
     <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
     <style>
         body {
             font-family: 'Inter', sans-serif;
             background-color: #f0f4f8; /* Light blue-gray background */
         }
         .task-completed {
             text-decoration: line-through;
             color: #6b7280; /* Gray text for completed */
         }
         .task-completed .task-icon {
             background-color: #10b981; /* Green for completed icon - standard completion color */
             color: white;
         }
         .task-icon-pending {
             background-color: #6b21a8; /* Aetna Purple (Tailwind purple-800) */
             color: white;
         }
         /* Custom scrollbar */
         ::-webkit-scrollbar {
             width: 8px;
         }
         ::-webkit-scrollbar-track {
             background: #f1f1f1;
             border-radius: 10px;
         }
         ::-webkit-scrollbar-thumb {
             background: #888;
             border-radius: 10px;
         }
         ::-webkit-scrollbar-thumb:hover {
             background: #555;
         }
         /* Complete button styling */
         .complete-button {
             transition: background-color 0.3s ease, transform 0.2s ease;
         }
         .complete-button:hover {
             transform: translateY(-1px);
         }
         .complete-button:active {
             transform: translateY(0px);
         }
         .iframe-full-container {
             border: 1px solid #d1d5db;
             border-radius: 0.5rem;
             overflow: hidden; /* Important to contain the iframe */
         }
         /* Modal Styles */
         .modal {
             display: none; 
             position: fixed; 
             z-index: 10; 
             left: 0;
             top: 0;
             width: 100%; 
             height: 100%; 
             overflow: auto; 
             background-color: rgba(0,0,0,0.4); 
         }
         .modal-content {
             background-color: #fefefe;
             margin: 10% auto; 
             padding: 20px;
             border: 1px solid #888;
             width: 90%; 
             max-width: 500px; 
             border-radius: 0.5rem;
             box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
         }
         .close-button {
             color: #aaa;
             float: right;
             font-size: 28px;
             font-weight: bold;
         }
         .close-button:hover,
         .close-button:focus {
             color: black;
             text-decoration: none;
             cursor: pointer;
         }
         /* Horizontal Task List Item - Made wider */
         .horizontal-task-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0.5rem; 
            margin: 0.25rem; 
            min-width: 160px; /* Increased min-width */
            max-width: 180px; /* Increased max-width */
            text-align: center;
            border: 1px solid #e5e7eb; 
         }
         .horizontal-task-item .task-info {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 0.25rem; 
         }
         .horizontal-task-item .task-icon { 
            width: 2rem; 
            height: 2rem; 
            font-size: 0.875rem; 
            margin-bottom: 0.25rem; 
         }
         .horizontal-task-item .task-title-text { 
            font-size: 0.75rem; 
            line-height: 1.2; 
            display: -webkit-box; 
            -webkit-line-clamp: 3; /* Increased line clamp to 3 */
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            min-height: 2.7em; /* Approximate height for 3 lines (0.9em * 3) */
            max-height: 3.6em; /* Ensure it doesn't grow too tall (1.2em * 3) */
         }
         .horizontal-task-item .complete-button {
            width: 100%; 
            font-size: 0.625rem; 
            padding: 0.25rem 0.375rem; 
            margin-top: 0.25rem;
         }

     </style>
 </head>
 <body class="antialiased">
     <div class="min-h-screen flex flex-col">
         <header class="bg-gradient-to-r from-purple-800 to-purple-900 shadow-lg">
             <div class="max-w-screen-xl mx-auto py-4 px-4 sm:px-6 lg:px-8 flex items-center justify-between">
                 <div class="flex items-center">
                     <svg class="h-8 w-8 text-white mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                         <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                     </svg>
                     <h1 class="text-2xl font-bold text-white">Aetna Onboarding</h1>
                 </div>
             </div>
         </header>
 
         <main class="flex-grow max-w-screen-xl w-full mx-auto py-1 px-2 sm:px-4 lg:px-6 flex flex-col">
             
             <div class="iframe-full-container mb-2 md:mb-4">
                 <iframe src="https://scribehow.com/page-embed/AETNA_ONBOARDING__3vBgXl_nQa2xd8knKJwCNw" width="100%" height="800" allow="fullscreen" style="border: 0; min-height: 640px; display: block;"></iframe>
             </div>

             <div class="bg-white shadow-lg rounded-lg p-2 md:p-4 flex-shrink-0"> 
                 <div class="mb-1"> 
                     <h2 class="text-lg font-semibold text-gray-700 mb-1">Progress</h2>
                     <div class="w-full bg-gray-200 rounded-full h-3">
                         <div id="progressBar" class="bg-purple-800 h-3 rounded-full transition-all duration-500 ease-out" style="width: 0%;"></div>
                     </div>
                     <p id="progressText" class="text-xs text-gray-500 mt-1 text-right">0% Complete</p>
                 </div>
 
                 <div class="mb-1"> 
                     <h2 class="text-lg font-semibold text-gray-700 mb-1">Checklist</h2>
                     <ul id="taskList" class="flex flex-wrap justify-center md:justify-start -m-1">
                         </ul>
                 </div>
 
                 <button id="downloadButton" class="w-full md:w-auto mt-1 inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-gray-400 hover:bg-gray-400 opacity-50 cursor-not-allowed" disabled>
                     Download Completion Certificate
                 </button>
             </div>
 
         </main>
 
         <footer class="bg-gray-800 mt-auto py-2 px-4">
             <div class="max-w-screen-xl mx-auto text-center">
                 <p class="text-xs text-gray-400">&copy; <span id="currentYear"></span> Aetna Inc. All rights reserved.</p>
             </div>
         </footer>
 
         <div id="downloadModal" class="modal">
             <div class="modal-content">
                 <span class="close-button" id="closeModalBtn">&times;</span>
                 <h2 class="text-xl font-semibold text-gray-800 mb-6">Download Your Completion Certificate</h2>
                 <form id="downloadForm" class="space-y-4">
                     <div>
                         <label for="agentName" class="block text-sm font-medium text-gray-700 mb-1">Your Name:</label>
                         <input type="text" id="agentName" name="agentName" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-700 focus:border-purple-700 sm:text-sm" required>
                     </div>
                     <div>
                         <label for="agentNPN" class="block text-sm font-medium text-gray-700 mb-1">Your NPN Number:</label>
                         <input type="text" id="agentNPN" name="agentNPN" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-700 focus:border-purple-700 sm:text-sm">
                     </div>
                     <button type="submit" class="w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-purple-800 hover:bg-purple-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-700">
                         Download PDF
                     </button>
                 </form>
             </div>
         </div>
     </div>
 
     <script>
         // Updated task titles
         const tasks = [
             { id: 'email', title: 'Get started Email', completed: false },
             { id: 'profile', title: 'Employee and Business Profile Demographics', completed: false },
             { id: 'questionnaire', title: 'Complete Background Questionnaire', completed: false },
             { id: 'authorization', title: 'Complete Background Authorization', completed: false }, 
             { id: 'submit', title: 'Sign and Submit', completed: false }  
         ];
 
         const taskListElement = document.getElementById('taskList');
         const progressBarElement = document.getElementById('progressBar');
         const progressTextElement = document.getElementById('progressText');
         const downloadButton = document.getElementById('downloadButton');
         const downloadModal = document.getElementById('downloadModal');
         const closeModalButton = document.getElementById('closeModalBtn');
         const downloadForm = document.getElementById('downloadForm');
 
         function renderTasks() {
             taskListElement.innerHTML = ''; 
             tasks.forEach((task, index) => {
                 const listItem = document.createElement('li');
                 listItem.className = `horizontal-task-item bg-white rounded-md shadow-sm border transition-all duration-300 ${task.completed ? 'opacity-60' : ''}`; 
                 
                 const taskInfoDiv = document.createElement('div');
                 taskInfoDiv.className = 'task-info'; 
 
                 const iconSpan = document.createElement('span');
                 iconSpan.className = `task-icon w-6 h-6 rounded-full flex items-center justify-center text-xs font-semibold ${task.completed ? 'task-completed' : 'task-icon-pending'}`; 
                 iconSpan.textContent = index + 1;
 
                 const titleSpan = document.createElement('span');
                 titleSpan.className = `task-title-text text-gray-700 mt-1 ${task.completed ? 'task-completed' : ''}`; 
                 titleSpan.textContent = task.title;
 
                 taskInfoDiv.appendChild(iconSpan);
                 taskInfoDiv.appendChild(titleSpan);
                 listItem.appendChild(taskInfoDiv);
 
                 const completeButton = document.createElement('button');
                 completeButton.textContent = task.completed ? 'Undo' : 'Done'; 
                 completeButton.className = `complete-button w-full px-1 py-0.5 border border-transparent text-[10px] font-medium rounded shadow-sm text-white ${task.completed ? 'bg-yellow-500 hover:bg-yellow-600 focus:ring-yellow-400' : 'bg-purple-700 hover:bg-purple-800 focus:ring-purple-600'} focus:outline-none focus:ring-1 focus:ring-offset-1`; 
                 completeButton.onclick = () => toggleTaskCompletion(index);
                 listItem.appendChild(completeButton);
 
                 taskListElement.appendChild(listItem);
             });
             updateProgress();
         }
 
         function toggleTaskCompletion(taskIndex) {
             tasks[taskIndex].completed = !tasks[taskIndex].completed; 
             renderTasks();
         }
 
         function updateProgress() {
             const completedTasks = tasks.filter(task => task.completed).length;
             const totalTasks = tasks.length;
             const percentage = totalTasks > 0 ? (completedTasks / totalTasks) * 100 : 0;
             
             progressBarElement.style.width = `${percentage}%`;
             progressTextElement.textContent = `${Math.round(percentage)}% Complete (${completedTasks}/${totalTasks} tasks)`;
 
             const allTasksCompleted = totalTasks > 0 && completedTasks === totalTasks;
             if (allTasksCompleted) {
                 downloadButton.disabled = false;
                 downloadButton.classList.remove('opacity-50', 'cursor-not-allowed', 'bg-gray-400', 'hover:bg-gray-400');
                 downloadButton.classList.add('bg-purple-800', 'hover:bg-purple-900');
             } else {
                 downloadButton.disabled = true;
                 downloadButton.classList.add('opacity-50', 'cursor-not-allowed', 'bg-gray-400', 'hover:bg-gray-400');
                 downloadButton.classList.remove('bg-purple-800', 'hover:bg-purple-900');
             }
         }
 
         downloadButton.onclick = function() {
             if (!downloadButton.disabled) { 
                 downloadModal.style.display = "block";
             }
         }
 
         closeModalButton.onclick = function() {
             downloadModal.style.display = "none";
         }
 
         window.onclick = function(event) {
             if (event.target == downloadModal) {
                 downloadModal.style.display = "none";
             }
         }
 
         downloadForm.onsubmit = function(event) {
             event.preventDefault();
             const agentName = document.getElementById('agentName').value;
             const agentNPN = document.getElementById('agentNPN').value;
             const { jsPDF } = window.jspdf; 
             const pdf = new jsPDF();

             const aetnaPurple = '#4b0082'; 
             const lightGray = '#f0f0f0';
             const darkGray = '#333333';
             const pageWidth = pdf.internal.pageSize.getWidth();
             const pageHeight = pdf.internal.pageSize.getHeight();
             const margin = 15;

             pdf.setDrawColor(aetnaPurple);
             pdf.setLineWidth(1.5);
             pdf.rect(margin / 2, margin / 2, pageWidth - margin, pageHeight - margin);
             pdf.setLineWidth(0.5);
             pdf.rect(margin / 2 + 2, margin / 2 + 2, pageWidth - margin - 4, pageHeight - margin - 4);

             pdf.setFont('Helvetica', 'bold');
             pdf.setFontSize(24);
             pdf.setTextColor(aetnaPurple);
             pdf.text('Certificate of Onboarding Completion', pageWidth / 2, margin + 10, { align: 'center' });

             pdf.setFont('Helvetica', 'normal');
             pdf.setFontSize(12);
             pdf.setTextColor(darkGray);
             pdf.text('This certificate is proudly presented to:', pageWidth / 2, margin + 30, { align: 'center' });

             pdf.setFont('Helvetica', 'bold');
             pdf.setFontSize(18);
             pdf.setTextColor(aetnaPurple);
             pdf.text(agentName, pageWidth / 2, margin + 40, { align: 'center' });

             pdf.setFont('Helvetica', 'normal');
             pdf.setFontSize(12);
             pdf.setTextColor(darkGray);
             if (agentNPN) {
                pdf.text(`NPN: ${agentNPN}`, pageWidth / 2, margin + 48, { align: 'center' });
             }
             
             pdf.text('For successfully completing all required onboarding tasks for', pageWidth / 2, margin + 60, { align: 'center' });
             pdf.setFont('Helvetica', 'bold');
             pdf.text('Aetna Inc.', pageWidth / 2, margin + 68, { align: 'center' });

             const completionDate = new Date();
             pdf.setFont('Helvetica', 'normal');
             pdf.setFontSize(11);
             pdf.text(`Date of Completion: ${completionDate.toLocaleDateString()} at ${completionDate.toLocaleTimeString()}`, pageWidth / 2, margin + 85, { align: 'center' });
             
             const sealX = pageWidth - margin - 30;
             const sealY = pageHeight - margin - 40;
             pdf.setFillColor(aetnaPurple);
             pdf.circle(sealX, sealY, 15, 'F'); 
             pdf.setFillColor(255, 255, 255);
             pdf.circle(sealX, sealY, 13, 'F'); 
             pdf.setFillColor(aetnaPurple);
             pdf.circle(sealX, sealY, 10, 'F'); 
             pdf.setFont('Helvetica', 'bold');
             pdf.setTextColor(255,255,255);
             pdf.setFontSize(10);
             pdf.text('A', sealX, sealY + 3, {align: 'center'}); 

             pdf.setTextColor(darkGray);
             pdf.setFontSize(10);
             pdf.text('Authorized Signature:', margin, pageHeight - margin - 25);
             pdf.setDrawColor(darkGray);
             pdf.setLineWidth(0.3);
             pdf.line(margin + 40, pageHeight - margin - 25, margin + 100, pageHeight - margin - 25);
 
             pdf.save(`Aetna_Onboarding_Certificate_${agentName.replace(/\s+/g, '_') || 'Agent'}.pdf`);
             downloadModal.style.display = "none";
             downloadForm.reset();
         };
 
         document.getElementById('currentYear').textContent = new Date().getFullYear();
 
         renderTasks(); 
     </script>
 </body>
 </html>
